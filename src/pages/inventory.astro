---
import Layout from '../layouts/Layout.astro';
import Button from '../components/ui/Button.astro';
import Table from '../components/ui/Table.astro';
import TableRow from '../components/ui/TableRow.astro';
import TableCell from '../components/ui/TableCell.astro';
import InventoryModal from '../components/modals/InventoryModal.astro';
import { formatCurrency, formatDate } from '../utils/formatters';
---

<Layout title="Inventory - iPhone Store">
  <div class="bg-white rounded-lg shadow-md p-6">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold">Inventory Management</h1>
      <Button id="addNewButton" variant="primary">Add New iPhone</Button>
    </div>

    <Table headers={['Model', 'Color', 'Storage', 'Quantity', 'Cost Price', 'Selling Price', 'Supplier', 'Purchase Date', 'Actions']}>
      <TableRow>
        <TableCell>iPhone 14 Pro</TableCell>
        <TableCell>Space Black</TableCell>
        <TableCell>256GB</TableCell>
        <TableCell>10</TableCell>
        <TableCell>$800</TableCell>
        <TableCell>$999</TableCell>
        <TableCell>Apple Inc</TableCell>
        <TableCell>2024-03-19</TableCell>
        <TableCell class="space-x-2">
          <button class="edit-button text-blue-600 hover:text-blue-900" data-id="1">Edit</button>
          <button class="delete-button text-red-600 hover:text-red-900" data-id="1">Delete</button>
        </TableCell>
      </TableRow>
    </Table>
  </div>

  <InventoryModal />
</Layout>

<script>
  document.querySelectorAll('.edit-button').forEach(button => {
    button.addEventListener('click', (e) => {
      const id = (e.target as HTMLElement).dataset.id;
      console.log('Edit item:', id);
      const modal = document.querySelector('#inventoryModal') as HTMLDialogElement;
      modal.showModal();
    });
  });

  document.querySelectorAll('.delete-button').forEach(button => {
    button.addEventListener('click', (e) => {
      const id = (e.target as HTMLElement).dataset.id;
      if (confirm('Are you sure you want to delete this item?')) {
        console.log('Delete item:', id);
      }
    });
  });
</script>